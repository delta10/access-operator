apiVersion: access.k8s.delta10.nl/v1
kind: PostgresAccess
metadata:
  labels:
    app.kubernetes.io/name: access-operator
    app.kubernetes.io/managed-by: kustomize
  name: postgresaccess-sample
spec:
  # Name of the secret where generated credentials will be stored
  generatedSecret: my-app-postgres-credentials

  # Optional: specify the username (if omitted, will be auto-generated)
  username: my-app-user

  # Connection details - Option 1: Direct connection details
  connection:
    host: postgres.example.com
    port: 5432
    database: mydb
    username:
      value: admin
    password:
      # Recommended: Use secretRef instead of plain value in production
      secretRef:
        name: postgres-admin-secret
        key: password

  # Privileges to grant
  grants:
    - database: mydb
      schema: public  # optional, defaults to "public"
      privileges:
        - CONNECT
        - SELECT
        - INSERT
        - UPDATE